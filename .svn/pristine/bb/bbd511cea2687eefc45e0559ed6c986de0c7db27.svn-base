<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd
                        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="now" value="now()" dbms="h2" />
	<property name="now" value="current_timestamp" dbms="postgresql" />

	<changeSet author="ehr_admin" id="staff_member_id_seq">
		<createSequence incrementBy="1" sequenceName="staff_member_id_seq"
			startValue="3" />
	</changeSet>
	<changeSet id="staff_member" author="ehr_admin">

		<!-- Staff Member table for storing Staff Member information. -->
		<createTable tableName="staff">
			<column name="staff_id" type="bigint" autoIncrement="${autoIncrement}">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="login_id" type="varchar(10)">
				<constraints nullable="false" />
			</column>
			<column name="login_key" type="varchar(500)">
				<constraints nullable="false" />
			</column>
			<column name="first_name" type="varchar(500)">
				<constraints nullable="false" />
			</column>
			<column name="middle_name" type="varchar(500)" />
			<column name="last_name" type="varchar(500)">
				<constraints nullable="false" />
			</column>
			<column name="staff_image" type="varchar" />
			<column name="provider_flag" type="varchar(1)">
				<constraints nullable="false" />
			</column>
			<column name="provider_type" type="varchar(100)" />
			<column name="designation" type="varchar(100)" />
			<column name="active_flag" type="varchar(6)">
				<constraints nullable="false" />
			</column>
			<column name="organization_id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="location_id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="mobile_no" type="varchar(500)" />
			<column name="business_phone_no" type="varchar(500)" />
			<column name="email" type="varchar(500)" />
			<column name="npi_number" type="varchar(500)" />
			<column name="last_client" type="varchar(100)" />
			<column name="last_action" type="varchar(500)" />
			<column name="last_login_dt" type="timestamp" />
			<column name="last_action_dt" type="varchar(500)" />
			<column name="created_date" type="timestamp with time zone"
				defaultValueDate="${now}">
				<constraints nullable="false" />
			</column>
			<column name="created_by" type="varchar(100)">
			</column>
			<column name="last_updated_date" type="timestamp with time zone"
				defaultValueDate="${now}">
				<constraints nullable="false" />
			</column>
			<column name="last_updated_by" type="varchar(100)">
			</column>
			<column name="license_state" type="varchar(500)">
            </column>
            <column name="license_number" type="varchar(500)">
            </column>
            <column name="license_exp_date" type="varchar(500)">
            </column>
            <column name="dea_number" type="varchar(500)">
            </column>
            <column name="dea_exp_date" type="varchar(500)">
            </column>
            <column name="mal_coverage" type="varchar(500)">
            </column>
            <column name="mal_expiration" type="timestamp with time zone">
            </column>
            <column name="dob" type="timestamp with time zone">
            </column>
            <column name="gender" type="varchar">
            </column>
            <column name="ssn" type="varchar">
            </column>
		</createTable>

		<addForeignKeyConstraint baseColumnNames="organization_id"
			baseTableName="staff" constraintName="fk_staff_member_organization_id"
			deferrable="true" initiallyDeferred="true" onDelete="CASCADE"
			onUpdate="RESTRICT" referencedColumnNames="organization_id"
			referencedTableName="organization" />

		<addForeignKeyConstraint baseColumnNames="location_id"
			baseTableName="staff" constraintName="fk_staff_member_clinic_location_id"
			deferrable="true" initiallyDeferred="true" onDelete="CASCADE"
			onUpdate="RESTRICT" referencedColumnNames="location_id"
			referencedTableName="clinic_loc" />

		<sql>
			INSERT INTO "staff"
			(staff_id,active_flag,business_phone_no,created_by,created_date,designation,email,first_name,last_action,last_action_dt,last_client,last_login_dt,last_name,last_updated_by,last_updated_date,login_id,login_key,middle_name,mobile_no,npi_number,provider_flag,provider_type,staff_image,location_id,organization_id,
			license_state,license_number,license_exp_date,dea_number,dea_exp_date,mal_coverage,mal_expiration,dob,gender,ssn)
			VALUES
			(1,'Y','444-323-2222',NULL,'2019-02-01
			11:41:13.599','MD','poonam.cloudpoint@gmail.com','poonam',NULL,NULL,NULL,NULL,'Nerkar',NULL,'2019-02-01
			11:41:13.599','poonam','Poonam@15','v.','444-444-4444','21212','N','null',NULL,1,1,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),
			(2,'Y','333-333-3333',NULL,'2019-02-01
			14:54:34.510','MD','shweta.cloudpoint@gmail.com','shweta',NULL,NULL,NULL,NULL,'bile',NULL,'2019-02-01
			14:54:34.510','shweta','Shweta@14','c','333-333-3333','111','N','null','null',1,1,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
		</sql>

	</changeSet>
</databaseChangeLog>
